// Your existing code...

int photoNumber = 0; // New variable for photo numbering

void setup() {
    // Your existing setup code...

    // Rest of your existing setup code...
}

void loop() {
    unsigned long currentMillis = millis();
    if (currentMillis - previousMillis >= interval) {
        previousMillis = currentMillis;

        photoNumber++;
        String filename = "/photo_" + String(photoNumber) + ".jpg";  // Generate filename
        takePhoto(filename);
        printAndBuffer(String(gps.location.lat(), 6) + ", " + String(gps.location.lng(), 6));
    }

    // Rest of your existing loop code...
}

void handleListImages(AsyncWebServerRequest *request) {
    String html = "<html><body><ul>";

    File root = SD_MMC.open("/");
    if (root) {
        String filenames[10];
        int index = 0;
        File file = root.openNextFile();
        while (file) {
            String fileName = file.name();
            if (fileName.endsWith(".jpg") || fileName.endsWith(".jpeg")) {
                filenames[index] = fileName;
                index++;
                if (index >= 10) {
                    break;
                }
            }
            file = root.openNextFile();
        }
        for (int i = 0; i < index; i++) {
            html += "<li><a href='/view?name=" + filenames[i] + "'>" + filenames[i] + "</a></li>";
        }
    }
    html += "</ul><br/><a href='/'>Back to main page</a></body></html>";

    request->send(200, "text/html", html);
}

// Your existing code...
