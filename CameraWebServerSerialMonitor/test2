String listFilesOnSD() {
    File root = SD_MMC.open("/");
    String filelist = "[";
    File file = root.openNextFile();
    while (file) {
        if (!file.isDirectory()) {
            filelist += "\"" + String(file.name()) + "\",";
        }
        file = root.openNextFile();
    }
    if (filelist.length() > 1) {
        filelist.remove(filelist.length() - 1);  // remove last comma
    }
    filelist += "]";
    return filelist;
}

// Add this to the `setup` function:
server.on("/listphotos", HTTP_GET, [](AsyncWebServerRequest *request) {
    request->send(200, "application/json", listFilesOnSD().c_str());
});



<p>
    <i class="fas fa-images" style="color:#4CAF50;"></i>
    <span class="dht-labels">Photos on SD Card:</span>
</p>
<ul id="photoList"></ul>



setInterval(function () {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            var files = JSON.parse(this.responseText);
            var listHtml = '';
            for (var i = 0; i < files.length; i++) {
                listHtml += '<li><a href="/getphoto?name=' + files[i] + '">' + files[i] + '</a></li>';
            }
            document.getElementById("photoList").innerHTML = listHtml;
        }
    };
    xhttp.open("GET", "/listphotos", true);
    xhttp.send();
}, 5000);



// Add this to the `setup` function:
server.on("/getphoto", HTTP_GET, [](AsyncWebServerRequest *request) {
    String filename;
    if (request->hasParam("name")) {
        filename = request->getParam("name")->value();
        if (SD_MMC.exists(filename.c_str())) {
            request->send(SD_MMC, filename.c_str(), "image/jpeg");
            return;
        }
    }
    request->send(404, "text/plain", "File not found");
});
