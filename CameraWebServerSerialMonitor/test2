void handleListImages(AsyncWebServerRequest *request) {
    String html = "<html><body><ul>";

    File root = SD_MMC.open("/");
    if (root) {
        File files[10]; // Array to store the last 10 files
        int fileCount = 0; // Count of valid image files

        // Find the last 10 image files
        File file = root.openNextFile();
        while (file) {
            String fileName = file.name();
            if (fileName.endsWith(".jpg") || fileName.endsWith(".jpeg")) {
                files[fileCount % 10] = file; // Store file in the circular buffer
                fileCount++;
            }
            file = root.openNextFile();
        }

        // Display the last 10 image files
        for (int i = 0; i < min(fileCount, 10); i++) {
            String fileName = files[(fileCount + i) % 10].name();
            html += "<li><a href='/view?name=" + fileName + "'>" + fileName + "</a></li>";
        }
    }

    html += "</ul><br/><a href='/'>Back to main page</a></body></html>";

    request->send(200, "text/html", html);
}
